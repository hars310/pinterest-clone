<% include ./partials/header.ejs %>

<div class="w-full min-h-screen bg-zinc-800 p-10 text-white ">
    <div class="search-bar mb-10  ">
        <input rounded-md class="text-zinc-800 rounded-md px-4 py-2" type="text" id="searchInput" placeholder="Search by title...">
        <button  class="rounded-md bg-red-700  px-4 py-2" onClick="searchImages()">Search</button>
    </div>
    <div class="cards flex flex-wrap gap-10">
        <% posts.forEach(function(e){ %>

            <div class="w-60 card">
                <div class=" w-60 h-72 bg-sky-100 rounded-md overflow-hidden">
                   <a href="/image/<%= e._id %>"><img class="w-full h-full object-cover " src="/images/uploads/<%= e.image %>" alt=""></a> 
                </div>
                <div class="flex ">
                    <div>
                        <h4 class="mt-1">@<%= e.user.username %></h4>
                        <h5 class=" px-2 "><strong class="text-red-700"> <%= e.title %> </strong> </h5>
                    </div>
                </div>
            </div>
        <% }) %>
    </div>
</div>
<script>
    function searchImages() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const cards = document.querySelectorAll('.card');

        cards.forEach(card => {
            const title = card.querySelector('h5').innerText.toLowerCase();
            
            if (title.includes(searchTerm)) {
                card.style.display = 'block';
            } else {
                card.style.display = 'none';
            }
        });
    }
</script>


<% include ./partials/footer.ejs %>
